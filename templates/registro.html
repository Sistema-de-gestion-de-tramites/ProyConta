{% extends 'menu.html' %}

{% block contenido %}
{% if messages %}
<div class="messages">
    {% for message in messages %}
    <p {% if message.tags %} class="alert alert-{{message.tags}}"{% endif %}>{{ message }}</p>
    {% endfor %}
</div>
{% endif %}
<form method="POST">
    {% csrf_token %}
    {% for field in form %}
        <p>
        {% if field.name == form.roles.name %}
            {% if sinResgistros %}
                {{field.label}}: no hay roles registrados
            {% else %}
                {{field.label}}:<br>
                {% for opcion in field %}
                    {% if opcion.data.label == 'Administrador' and user.is_superuser %}
                    {{opcion}} [Advertencia este rol otorga todos los permisos en el sistema. Solo los Administradores pueden asignar este rol]<br>
                    {% elif opcion.data.label != 'Administrador' %}
                    {{opcion}}<br>
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% else %}
        {{field.label}} : {{field}}
        {% endif %}
        </p>
    {% endfor %}
    <div class="d-grid gap-2 col-3 mx-auto">
        <button type="submit" class="btn btn-sm btn-primary btn-lg">Registrar</button>
        <a class="btn btn-sm btn-danger btn-lg" href="{% url 'listar_cuentas_usuario' %}">Cancelar</a>
    </div>
</form>

{% endblock %}